version: '3'

tasks:
  up:
    desc: ğŸš€ å•Ÿå‹•æ‰€æœ‰å®¹å™¨ (Go + DB + Redis)
    cmds:
      - docker-compose up --build -d

  down:
    desc: ğŸ›‘ åœæ­¢ä¸¦ç§»é™¤å®¹å™¨
    cmds:
      - docker-compose down

  bench:
    desc: âš¡ åŸ·è¡Œå£“æ¸¬ (æ¨¡æ“¬ 100 ä½µç™¼)
    cmds:
      - oha -n 1000 -c 100 http://localhost:8080/projects/1

  test-cache:
    desc: ğŸ” é©—è­‰ç·©å­˜æ©Ÿåˆ¶
    cmds:
      - curl -i http://localhost:8080/projects/1
      - echo "\n--- ç¬¬äºŒæ¬¡è«‹æ±‚ (é æœŸæ‡‰çœ‹åˆ° X-Cache HIT) ---"
      - curl -i http://localhost:8080/projects/1

  clean:
    desc: ğŸ§¹ æ¸…ç† Go ç·¨è­¯æª”æ¡ˆèˆ‡ç·©å­˜
    cmds:
      - go clean
      - docker-compose exec redis redis-cli flushall
